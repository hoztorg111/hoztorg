"use strict";!function(g,e){function c(n,r,o,i,a){var d=!1;return n.contents().detach().each(function(){var t=this,e=g(t);if(void 0===t||3==t.nodeType&&0==g.trim(t.data).length)return!0;if(e.is("script, .dotdotdot-keep"))n.append(e);else{if(d)return!0;n.append(e),!a||e.is(i.after)||e.find(i.after).length||n[n.is("a table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style")?"after":"append"](a),v(o,i)&&((d=(3==t.nodeType?function(t,e,n,r,o){var i=t[0];if(!i)return!1;var a=y(i),d=-1!==a.indexOf(" ")?" ":"　",l="letter"==r.wrap?"":d,s=a.split(l),c=-1,u=-1,h=0,f=s.length-1;for(r.fallbackToLetter&&0==h&&0==f&&(l="",s=a.split(l),f=s.length-1);h<=f&&(0!=h||0!=f);){var p=Math.floor((h+f)/2);if(p==u)break;u=p,b(i,s.slice(0,u+1).join(l)+r.ellipsis),v(n,r)?(f=u,r.fallbackToLetter&&0==h&&0==f&&(l="",s=s[0].split(l),u=c=-1,h=0,f=s.length-1)):h=c=u}-1==c||1==s.length&&0==s[0].length?(d=t.parent(),t.detach(),t=o&&o.closest(d).length?o.length:0,d.contents().length>t?i=m(d.contents().eq(-1-t),e):(i=m(d,e,!0),t||d.detach()),i&&(a=w(y(i),r),b(i,a),t&&o&&g(i).parent().append(o))):(a=w(s.slice(0,c+1).join(l),r),b(i,a));return!0}:c)(e,r,o,i,a))||(e.detach(),d=!0)),d||a&&a.detach()}}),d}function v(t,e){return t.innerHeight()>e.maxHeight}function w(t,e){for(;-1<g.inArray(t.slice(-1),e.lastCharacter.remove);)t=t.slice(0,-1);return g.inArray(t.slice(-1),e.lastCharacter.noEllipsis)<0&&(t+=e.ellipsis),t}function u(t){return{width:t.innerWidth(),height:t.innerHeight()}}function b(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function y(t){return t.innerText||t.nodeValue||t.textContent||""}function i(t){for(;(t=t.previousSibling)&&1!==t.nodeType&&3!==t.nodeType;);return t}function m(t,e,n){var r,o=t&&t[0];if(o){if(!n){if(3===o.nodeType)return o;if(g.trim(t.text()))return m(t.contents().last(),e)}for(r=i(o);!r;){if((t=t.parent()).is(e)||!t.length)return!1;r=i(t[0])}if(r)return m(g(r),e)}return!1}var h,n,r;g.fn.dotdotdot||(g.fn.dotdotdot=function(t){if(0==this.length)return g.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(1<this.length)return this.each(function(){g(this).dotdotdot(t)});var r=this;r.data("dotdotdot")&&r.trigger("destroy.dot"),r.data("dotdotdot-style",r.attr("style")||""),r.css("word-wrap","break-word"),"nowrap"===r.css("white-space")&&r.css("white-space","normal"),r.bind_events=function(){return r.bind("update.dot",function(t,e){t.preventDefault(),t.stopPropagation(),i.maxHeight="number"==typeof i.height?i.height:function(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],r=0,o=n.length;r<o;r++){var i=parseInt(t.css(n[r]),10);e-=i=isNaN(i)?0:i}return e}(r),i.maxHeight+=i.tolerance,void 0===e||(e="string"==typeof e||"nodeType"in e&&1===e.nodeType?g("<div />").append(e).contents():e)instanceof g&&(o=e),(s=r.wrapInner('<div class="dotdotdot" />').children()).contents().detach().end().append(o.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});t=!1,e=!1;return a.afterElement&&((t=a.afterElement.clone(!0)).show(),a.afterElement.detach()),v(s,i)&&(e="children"==i.wrap?function(t,e,n){var r=t.children(),o=!1;t.empty();for(var i=0,a=r.length;i<a;i++){var d=r.eq(i);if(t.append(d),n&&t.append(n),v(t,e)){d.remove(),o=!0;break}n&&n.detach()}return o}(s,i,t):c(s,r,s,i,t)),s.replaceWith(s.contents()),s=null,g.isFunction(i.callback)&&i.callback.call(r[0],e,o),a.isTruncated=e}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(r[0],a.isTruncated),a.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(r[0],o),o}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),r.unwatch().unbind_events().contents().detach().end().append(o).attr("style",r.data("dotdotdot-style")||"").data("dotdotdot",!1)}),r},r.unbind_events=function(){return r.unbind(".dot"),r},r.watch=function(){var t,e,n;return r.unwatch(),"window"==i.watch?(t=g(window),e=t.width(),n=t.height(),t.bind("resize.dot"+a.dotId,function(){e==t.width()&&n==t.height()&&i.windowResizeFix||(e=t.width(),n=t.height(),l&&clearInterval(l),l=setTimeout(function(){r.trigger("update.dot")},100))})):(d=u(r),l=setInterval(function(){var t;r.is(":visible")&&(t=u(r),d.width==t.width&&d.height==t.height||(r.trigger("update.dot"),d=t))},500)),r},r.unwatch=function(){return g(window).unbind("resize.dot"+a.dotId),l&&clearInterval(l),r};var e,n,o=r.contents(),i=g.extend(!0,{},g.fn.dotdotdot.defaults,t),a={},d={},l=null,s=null;return i.lastCharacter.remove instanceof Array||(i.lastCharacter.remove=g.fn.dotdotdot.defaultArrays.lastCharacter.remove),i.lastCharacter.noEllipsis instanceof Array||(i.lastCharacter.noEllipsis=g.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),a.afterElement=(e=i.after,n=r,!!e&&("string"==typeof e?!!(e=g(e,n)).length&&e:!!e.jquery&&e)),a.isTruncated=!1,a.dotId=h++,r.data("dotdotdot",!0).bind_events().trigger("update.dot"),i.watch&&r.watch(),r},g.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},g.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},g.fn.dotdotdot.debug=function(t){},h=1,n=g.fn.html,g.fn.html=function(t){return t!=e&&!g.isFunction(t)&&this.data("dotdotdot")?this.trigger("update",[t]):n.apply(this,arguments)},r=g.fn.text,g.fn.text=function(t){return t!=e&&!g.isFunction(t)&&this.data("dotdotdot")?(t=g("<div />").text(t).html(),this.trigger("update",[t])):r.apply(this,arguments)})}(jQuery);
//# sourceMappingURL=jquery.dotdotdot.min.js.map
